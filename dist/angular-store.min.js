(function(){"use strict";angular.module("store.fileSystem.restangular",["restangular"]).factory("FileSystemAdapterRestangular",function(a){return a.withConfig(function(a){return a.setBaseUrl("http://localhost:9000/filesystem"),a.setRequestSuffix(".json"),a.setDefaultHttpFields({cache:!0}),a.setResponseExtractor(function(a,b,c){var d,e;return d=a||{},"getList"===b&&a&&a[c]&&(d=a[c]),"get"===b&&(e=pluralize(c,1),a&&a[e]&&(d=a[e])),d})})})}).call(this),function(){"use strict";angular.module("store.fileSystem",["store.fileSystem.core","store.fileSystem.restangular"]),angular.module("store.fileSystem.core",["store.fileSystem.restangular"]).factory("FileSystemAdapter",function(a,b){var c,d,e,f,g,h,i;return f=function(a){return b.all(pluralize(a)).getList()},i=function(c,d){var e;return e=a.defer(),b.all(pluralize(c)).getList().then(function(a){var b;return b=_.find(a,d),b?e.resolve(b):e.reject("not_found")}),e.promise},h=function(c,d){var e;return e=a.defer(),b.all(pluralize(c)).getList().then(function(a){var b;return b=_.find(a,{id:d}),b?e.resolve(b):e.reject("not_found")}),e.promise},g=function(c,d,e){var f;return f=a.defer(),b.all(pluralize(c)).getList().then(function(a){var b;return b=e instanceof Array?_.find(a,function(a){return _.isEqual(a[d],e)}):_.find(a,function(a){return a[d]===e}),b?f.resolve(b):f.reject("not_found")}),f.promise},d=function(a,b){return console.log("createRecord",a,b)},e=function(a,b){return console.log("deleteRecord",a,b)},c=function(){function a(){}return a.prototype.findAll=function(a){return f(a)},a.prototype.findByIds=function(a,b){return findByIds(a,b)},a.prototype.findById=function(a,b){return h(a,b)},a.prototype.findBy=function(a,b,c){return g(a,b,c)},a.prototype.createRecord=function(a,b){return d(a,b)},a.prototype.deleteRecord=function(a,b){return e(a,b)},a}()})}.call(this),function(){"use strict";angular.module("store.localForage",["store.core","LocalForageModule"]).config(function(a){return a.config({name:"archeage_tools",storeName:"archeage_tools"})}).factory("LocalForageAdapter",function(a,b){var c,d,e,f,g,h,i,j,k;return f=function(a){return b.getItem(a)},j=function(a,b){return console.log("findQuery",b)},i=function(b,c){var d,e;return d=a.defer(),e=[],_.each(c,function(a){return e.push(h(b,a))}),a.all(e).then(function(a){return d.resolve(a)}),d.promise},g=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var b;return b=_.find(a,d),b?e.resolve(b):e.reject("not_found")}),e.promise},h=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var b;return b=_.find(a,{id:d}),b?e.resolve(b):e.reject("not_found")}),e.promise},d=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var f;return a||(a=[]),f=a[a.length-1],d.id=f?f.id+1:1,a.push(d),b.setItem(c,a).then(function(){return e.resolve(d)})}),e.promise},e=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var f;return f=_.filter(a,function(a){return a.id!==d.id}),b.setItem(c,f).then(function(){return e.resolve()})}),e.promise},k=function(c,e){var f;return f=a.defer(),e.id?(b.getItem(c).then(function(a){return a=_.map(a,function(a){return a.id===e.id?e:a}),b.setItem(c,a).then(function(){return f.resolve(e)})}),f.promise):d(c,e)},c=function(){function a(){}return a.prototype.findAll=function(a){return f(a)},a.prototype.findQuery=function(a,b){return j(a,b)},a.prototype.findByIds=function(a,b){return i(a,b)},a.prototype.findById=function(a,b){return h(a,b)},a.prototype.findBy=function(a,b){return g(a,b)},a.prototype.createRecord=function(a,b){return d(a,b)},a.prototype.deleteRecord=function(a,b){return e(a,b)},a.prototype.saveRecord=function(a,b){return k(a,b)},a}()})}.call(this),function(){"use strict";angular.module("store.rest.restangular",["restangular"]).factory("RESTAdapterRestangular",function(a){return a.withConfig(function(a){return a.setBaseUrl("http://localhost:3000"),a.setDefaultHttpFields({cache:!0}),a.setResponseExtractor(function(a,b,c){var d,e;return d=a||{},"getList"===b&&a&&a[c]&&(d=a[c]),"get"===b&&(e=pluralize(c,1),a&&a[e]&&(d=a[e])),d})})})}.call(this),function(){"use strict";angular.module("store.rest",["store.rest.core","store.rest.restangular"]),angular.module("store.rest.core",["store.rest.restangular"]).factory("RESTAdapter",function(a){var b,c,d,e,f,g;return e=function(b){return a.all(pluralize(b)).getList()},g=function(b,c){return a.all(pluralize(b)).getList(c)},f=function(b,c){return a.one(pluralize(b),c).get()},c=function(a,b){return console.log("createRecord",a,b)},d=function(a,b){return console.log("deleteRecord",a,b)},b=function(){function a(){}return a.prototype.findAll=function(a){return e(a)},a.prototype.findByIds=function(a,b){return findByIds(a,b)},a.prototype.findById=function(a,b){return f(a,b)},a.prototype.createRecord=function(a,b){return c(a,b)},a.prototype.deleteRecord=function(a,b){return d(a,b)},a}()})}.call(this),function(){"use strict";angular.module("store",["store.core","store.localForage","store.rest","store.fileSystem"]),angular.module("store.core",[]).provider("Store",function(){var a,b;a=null,b=null,this.$get=function(b,c){return{"new":function(a){var d,e;return e=b.get(_.str.classify(a)),d=c.defer(),d.resolve(new e),d.promise},find:function(c,d){var e;return e=b.get(_.str.classify(c)+"Adapter"),a=new e,1===arguments.length?this.findAll(c):"object"==typeof d?this.findQuery(c,d):(d=parseInt(d,10)||d,this.findById(c,d))},findAll:function(d){var e,f;return f=b.get(_.str.classify(d)),e=c.defer(),a.findAll(d).then(function(a){return a=_.map(a,function(a){return new f(a)}),e.resolve(a)}),e.promise},findQuery:function(d,e){var f,g;return g=b.get(_.str.classify(d)),f=c.defer(),a.findQuery(d,e).then(function(a){return a=_.map(a,function(a){return new g(a)}),f.resolve(a)}),f.promise},findByIds:function(d,e){var f,g,h;return h=b.get(_.str.classify(d)),f=b.get(_.str.classify(d)+"Adapter"),a=new f,g=c.defer(),a.findByIds(d,e).then(function(a){return a=_.map(a,function(a){return new h(a)}),g.resolve(a)}),g.promise},findBy:function(d,e,f){var g,h;return g=b.get(_.str.classify(d)+"Adapter"),a=new g,h=c.defer(),a.findBy(d,e,f).then(function(a){var c;return c=b.get(_.str.classify(d)),a=new c(a),h.resolve(a)}),h.promise},findById:function(d,e){var f,g;return f=b.get(_.str.classify(d)+"Adapter"),a=new f,g=c.defer(),a.findById(d,e).then(function(a){var c;return c=b.get(_.str.classify(d)),a=new c(a),g.resolve(a)}),g.promise},createRecord:function(c,d){var e;return e=b.get(_.str.classify(c)+"Adapter"),a=new e,a.createRecord(c,d)},deleteRecord:function(c,d){var e;return e=b.get(_.str.classify(c)+"Adapter"),a=new e,a.deleteRecord(c,d)},saveRecord:function(c){var d,e,f;return e=c.constructor.name,f=_.str.underscored(e),d=b.get(""+e+"Adapter"),a=new d,a.saveRecord(f,c)}}}})}.call(this);