(function(){"use strict";angular.module("store.fileSystem.restangular",["restangular"]).factory("FileSystemAdapterRestangular",function(a){return a.withConfig(function(a){return a.setBaseUrl("http://localhost:9000/filesystem"),a.setRequestSuffix(".json"),a.setDefaultHttpFields({cache:!0}),a.setResponseExtractor(function(a,b,c){var d,e;return d=a||{},"getList"===b&&a&&a[c]&&(d=a[c]),"get"===b&&(e=pluralize(c,1),a&&a[e]&&(d=a[e])),d})})})}).call(this),function(){"use strict";angular.module("store.fileSystem",["store.fileSystem.core","store.fileSystem.restangular"]),angular.module("store.fileSystem.core",["store.fileSystem.restangular"]).factory("FileSystemAdapter",function(a,b){var c,d,e,f,g,h,i;return f=function(a){return b.all(pluralize(a)).getList()},i=function(c,d){var e;return e=a.defer(),b.all(pluralize(c)).getList().then(function(a){return a=_.filter(a,d),a?e.resolve(a):e.reject("not_found")}),e.promise},h=function(c,d){var e;return e=a.defer(),b.all(pluralize(c)).getList().then(function(a){var b;return b=_.find(a,{id:d}),b?e.resolve(b):e.reject("not_found")}),e.promise},g=function(c,d,e){var f;return f=a.defer(),b.all(pluralize(c)).getList().then(function(a){var b;return b=e instanceof Array?_.find(a,function(a){return _.isEqual(a[d],e)}):_.find(a,function(a){return a[d]===e}),b?f.resolve(b):f.reject("not_found")}),f.promise},d=function(a,b){return console.log("createRecord",a,b)},e=function(a,b){return console.log("deleteRecord",a,b)},c=function(){function a(){}return a.prototype.findAll=function(a){return f(a)},a.prototype.findQuery=function(a,b){return i(a,b)},a.prototype.findByIds=function(a,b){return findByIds(a,b)},a.prototype.findById=function(a,b){return h(a,b)},a.prototype.findBy=function(a,b,c){return g(a,b,c)},a.prototype.createRecord=function(a,b){return d(a,b)},a.prototype.deleteRecord=function(a,b){return e(a,b)},a}()})}.call(this),function(){"use strict";angular.module("store.localForage",["store.core","LocalForageModule"]).config(function(a){return a.config({name:"archeage_tools",storeName:"archeage_tools"})}).factory("LocalForageAdapter",function(a,b){var c,d,e,f,g,h,i,j,k;return f=function(a){return b.getItem(a)},j=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var b;return b=_.filter(a,d),b?e.resolve(b):e.reject("not_found")}),e.promise},i=function(b,c){var d,e;return d=a.defer(),e=[],_.each(c,function(a){return e.push(h(b,a))}),a.all(e).then(function(a){return d.resolve(a)}),d.promise},g=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var b;return b=_.find(a,d),b?e.resolve(b):e.reject("not_found")}),e.promise},h=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var b;return b=_.find(a,{id:d}),b?e.resolve(b):e.reject("not_found")}),e.promise},d=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var f;return a||(a=[]),f=a[a.length-1],d.id=f?f.id+1:1,a.push(d),b.setItem(c,a).then(function(){return e.resolve(d)})}),e.promise},e=function(c,d){var e;return e=a.defer(),b.getItem(c).then(function(a){var f;return f=_.filter(a,function(a){return a.id!==d.id}),b.setItem(c,f).then(function(){return e.resolve()})}),e.promise},k=function(c,e){var f;return f=a.defer(),e.id?(b.getItem(c).then(function(a){return a=_.map(a,function(a){return a.id===e.id?e:a}),b.setItem(c,a).then(function(){return f.resolve(e)})}),f.promise):d(c,e)},c=function(){function a(){}return a.prototype.findAll=function(a){return f(a)},a.prototype.findQuery=function(a,b){return j(a,b)},a.prototype.findByIds=function(a,b){return i(a,b)},a.prototype.findById=function(a,b){return h(a,b)},a.prototype.findBy=function(a,b){return g(a,b)},a.prototype.createRecord=function(a,b){return d(a,b)},a.prototype.deleteRecord=function(a,b){return e(a,b)},a.prototype.saveRecord=function(a,b){return k(a,b)},a}()})}.call(this),function(){"use strict";angular.module("store.rest.restangular",["restangular"]).factory("RESTAdapterRestangular",function(a){return a.withConfig(function(a){return a.setBaseUrl("http://localhost:3000"),a.setDefaultHttpFields({cache:!0}),a.setResponseExtractor(function(a,b,c,d,e){var f,g;return f=a||{},"getList"===b&&a&&a[c]&&(f=a[c]),"get"===b&&(g=pluralize(c,1),a&&a[g]&&(f=a[g])),f.originalResponse=e.data,f})})})}.call(this),function(){"use strict";angular.module("store.rest",["store.rest.core","store.rest.restangular"]),angular.module("store.rest.core",["store.rest.restangular"]).factory("sanitizeRestangularOne",function(){return function(a){return _.omit(a,"route","parentResource","getList","get","post","put","remove","head","trace","options","patch","$then","$resolved","restangularCollection","customOperation","customGET","customPOST","customPUT","customDELETE","customGETLIST","$getList","$resolved","restangularCollection","one","all","doGET","doPOST","doPUT","doDELETE","doGETLIST","addRestangularMethod","getRestangularUrl","several","getRequestedUrl","clone","reqParams","withHttpConfig","oneUrl","allUrl","getParentList","save","fromServer","plain","singleOne")}}).factory("RESTAdapter",function(a,b,c){var d,e,f,g,h,i;return g=function(b){return a.all(pluralize(b)).getList()},i=function(b,c){return a.all(pluralize(b)).getList(c)},h=function(d,e){var f;return f=c.defer(),a.one(pluralize(d),e).get().then(function(a){var c,d;for(d in b(a))_.include(d,"_ids")&&a.originalResponse&&(c=pluralize(d.replace("_ids","")),a.originalResponse[c]&&(a[c]=a.originalResponse[c]));return f.resolve(a)}),f.promise},e=function(a,b){return console.log("createRecord",a,b)},f=function(a,b){return console.log("deleteRecord",a,b)},d=function(){function a(){}return a.prototype.findAll=function(a){return g(a)},a.prototype.findByIds=function(a,b){return findByIds(a,b)},a.prototype.findById=function(a,b){return h(a,b)},a.prototype.findQuery=function(a,b){return i(a,b)},a.prototype.createRecord=function(a,b){return e(a,b)},a.prototype.deleteRecord=function(a,b){return f(a,b)},a}()})}.call(this),function(){"use strict";angular.module("store",["store.core","store.localForage","store.rest","store.fileSystem"]),angular.module("store.core",[]).provider("Store",function(){var a,b;a=null,b=null,this.$get=function(c,d){return{"new":function(a,b){var e,f,g;return e=d.defer(),g=_.str.classify(a)+"Model",c.has(g)?(f=c.get(g),e.resolve(new f(b,a))):e.reject("invalid_model"),e.promise},find:function(d,e){var f;return b=_.str.classify(d)+"Adapter",c.has(b)||console.error("invalid_adapter"),f=c.get(b),a=new f,1===arguments.length?this.findAll(d):"object"==typeof e?this.findQuery(d,e):(e=parseInt(e,10)||e,this.findById(d,e))},findAll:function(b){var e,f,g;return e=d.defer(),g=_.str.classify(b)+"Model",c.has(g)?(f=c.get(g),a.findAll(b).then(function(a){return a=_.map(a,function(a){return new f(a,b)}),e.resolve(a)},function(a){return e.reject(a)})):e.reject("invalid_model"),e.promise},findQuery:function(b,e){var f,g,h;return f=d.defer(),h=_.str.classify(b)+"Model",c.has(h)?(g=c.get(h),a.findQuery(b,e).then(function(a){return a=_.map(a,function(a){return new g(a,b)}),f.resolve(a)})):f.reject("invalid_model"),f.promise},findByIds:function(e,f){var g,h,i,j;return f||console.error("ids parameter required"),j=_.str.classify(e)+"Model",c.has(j)?(i=c.get(j),b=_.str.classify(e)+"Adapter",c.has(b)?(g=c.get(b),a=new g,h=d.defer(),a.findByIds(e,f).then(function(a){return a=_.map(a,function(a){return new i(a,e)}),h.resolve(a)},function(a){return h.reject(a)})):h.reject("invalid_adapter")):h.reject("invalid_model"),h.promise},findBy:function(e,f,g){var h,i;return i=d.defer(),b=_.str.classify(e)+"Adapter",c.has(b)?(h=c.get(b),a=new h,a.findBy(e,f,g).then(function(a){var b,d;return d=_.str.classify(e)+"Model",c.has(d)?(b=c.get(d),a=new b(a,e),i.resolve(a)):i.reject("invalid_model")},function(a){return i.reject(a)})):i.reject("invalid_adapter"),i.promise},findById:function(e,f){var g,h;return f||console.error("id parameter required"),h=d.defer(),b=_.str.classify(e)+"Adapter",c.has(b)?(g=c.get(b),a=new g,a.findById(e,f).then(function(a){var b,d;return d=_.str.classify(e)+"Model",c.has(d)?(b=c.get(d),a=new b(a,e),h.resolve(a)):h.reject("invalid_model")},function(a){return h.reject(a)})):h.reject("invalid_adapter"),h.promise},createRecord:function(d,e){var f;return b=_.str.classify(d)+"Adapter",c.has(b)?(f=c.get(b),a=new f,a.createRecord(d,e)):console.error("invalid_adapter")},deleteRecord:function(d,e){var f;return b=_.str.classify(d)+"Adapter",c.has(b)?(f=c.get(b),a=new f,a.deleteRecord(d,e)):console.error("invalid_adapter")},saveRecord:function(d){var e,f,g;return f=d.constructor.name,f=f.replace("Model",""),g=_.str.underscored(f),b=""+f+"Adapter",c.has(b)?(e=c.get(b),a=new e,a.saveRecord(g,d)):console.error("invalid_adapter")}}}})}.call(this);